databaseChangeLog:
  - property:
      name: tableNameTransactionStory
      value: transaction_story
  - changeSet:
      id: create_account_transaction_enums
      author: Aleksandr Varaksin
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: transaction_story
      changes:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/enums/add/ddl-add-account-transaction-enums.sql
      rollback:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/enums/drop/ddl-drop-account-transaction-enums.sql
  - changeSet:
      id: create_table_action
      author: Aleksandr Varaksin
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: action
      changes:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/table/create/ddl-create-table-action.sql
      rollback:
        - dropTable:
            tableName: action
  - changeSet:
      id: create_table_action_status
      author: Aleksandr Varaksin
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: action_status
      changes:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/table/create/ddl-create-table-action-status.sql
      rollback:
        - dropTable:
            tableName: action_status
  - changeSet:
      id: create_table_transaction_story
      author: Aleksandr Varaksin
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: transaction_story
      changes:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/table/create/ddl-create-table-transaction-story.sql
      rollback:
        - dropTable:
            tableName: transaction_story
  - changeSet:
      id: add_trigger_transaction_story_date_update
      author: Aleksandr Varaksin
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: transaction_story
      changes:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/triggers/add/ddl-add-in-transaction-story-trigger-for-date-update.sql
            relativeToChangelogFile: false
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/triggers/drop/ddl-drop-inn-transaction-story-trigger-for-date-update.sql
            relativeToChangelogFile: false
            stripComments: true
      rollback:
        - sqlFile:
            path: classpath:/db.changelog/v1.0/sql/triggers/drop/ddl-drop-inn-transaction-story-trigger-for-date-update.sql